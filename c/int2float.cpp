#include <iostream> 
#include <sstream>
#include <iomanip>
#include <cmath>

int noraml(double* vector, double* x){
   int VECTOR_LEN = sizeof(vector);
   
   double sum = 0.0;
   for(int i=0;i<16;i++){ 
      sum = sum + pow(vector[i],2);
   }
   sum = sqrt(sum);

   // double x[16];
   for(int i=0;i<16;i++){ 
      x[i] = vector[i]/sum;
   //  std::cout <<  vector[i]/sum << std::endl;
   } 

   return 1;
}

void test(){
   float sim_score = 0.0;

   int query[16]={-374623704,4673140,-30835819,78497662,372591664,309933781,258575701,356306773,-184364703,2873710,369843731,-106828567,-117518182,429632846,4908002,-207867210};
   double doc[16]={-0.302824,0.108858,-0.089438,0.069256,0.462502,0.339845,0.068547,0.225961,-0.148263,-0.016050,0.371487,-0.113609,-0.191820,0.461061,-0.096375,-0.258229};
   for (int i = 0; i < 16; i++) {
      double q = (double)query[i] / 1000000000;
      // double d = (double)doc[i] / 1000000000;

      sim_score = sim_score + (float)(q*doc[i]);
   }

   std::cout<< sim_score ;
   printf("  %f",sim_score);
   std::cout<< std::endl;
}


int main(){
   test();
   return 0;

   int a = -197473688;
   std::cout.precision(9); 
   std::cout << (double)a/1000000000 << std::endl; 

   //数组转逗号分割的字符串
   // std::string str1 = "";
   std::stringstream str1;
   double vlist[16] = {-197473688,142458493,-190136657,-571585,448921367,305246854,-8995882,222625377,-197241274,-32550245,396574298,-96765348,-143321276,449816035,-198903238,-301947222};
   for(int i=0;i<16;i++){ 
      str1 << std::setprecision(9) << (double)(vlist[i])/1000000000;
      str1 << ","; 
   }

   std::cout << str1.str() << std::endl;
   std::cout << "-----------" << std::endl; 

   double query[16] = {-2.9286255836486818,-0.2927297055721283,0.8340328335762024,1.221096158027649,0.8643556833267212,1.5409258604049683,3.0976879596710207,3.1198439598083498,-1.3106411695480347,1.4751454591751099,1.0416204929351807,0.02059166692197323,-1.5351004600524903,2.858454704284668,-0.5347331166267395,-1.8563034534454346};
   double doc[16] = {-1.6781396865844727,1.210618257522583,-1.6157892942428589,-0.0048573617823421959,3.8149526119232179,2.5940005779266359,-0.07644739001989365,1.8918797969818116,-1.6761646270751954,-0.27661335468292239,3.370105028152466,-0.8223159909248352,-1.2179502248764039,3.8225555419921877,-1.6902880668640137,-2.565960168838501};

   double q[16]; 
   double d[16];
   noraml(query,q);
   noraml(doc,d);

   double x = 0;
   for(int i=0;i<16;i++){
      x = x + q[i]*d[i];
   }
   std::cout << x << std::endl;

}

// g++ int2float.cpp && ./a.out 
